var markerClusterer=function(o){"use strict";function i(t,e){var r={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(r[o[s]]=t[o[s]]);return r}class n{static isAdvancedMarkerAvailable(t){return google.maps.marker&&!0===t.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,e){this.isAdvancedMarker(t)?t.map=e:t.setMap(e)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return!!this.isAdvancedMarker(t)||t.getVisible()}}class a{constructor(t){var{markers:t,position:e}=t;this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(0!==this.markers.length||this._position){var t=new google.maps.LatLngBounds(this._position,this._position);for(const e of this.markers)t.extend(n.getPosition(e));return t}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>n.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(n.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}const h=(t,e,r,s)=>{const o=l(t.getBounds(),e,s);return r.filter(t=>o.contains(n.getPosition(t)))},l=(t,e,r)=>{var{northEast:t,southWest:s}=z(t,e),t=c({northEast:t,southWest:s},r);return p(t,e)},s=(t,e,r)=>{t=l(t,e,r),e=t.getNorthEast(),r=t.getSouthWest();return[r.lng(),r.lat(),e.lng(),e.lat()]},u=(t,e)=>{var r=(e.lat-t.lat)*Math.PI/180,s=(e.lng-t.lng)*Math.PI/180,r=Math.sin(r/2),s=Math.sin(s/2),r=r*r+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*s*s;return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},z=(t,e)=>({northEast:e.fromLatLngToDivPixel(t.getNorthEast()),southWest:e.fromLatLngToDivPixel(t.getSouthWest())}),c=(t,e)=>{var{northEast:t,southWest:r}=t;return t.x+=e,t.y-=e,r.x-=e,r.y+=e,{northEast:t,southWest:r}},p=(t,e)=>{var{northEast:t,southWest:r}=t,r=e.fromDivPixelToLatLng(r),e=e.fromDivPixelToLatLng(t);return new google.maps.LatLngBounds(r,e)};class t{constructor(t){var{maxZoom:t=16}=t;this.maxZoom=t}noop(t){t=t.markers;return r(t)}}class e extends t{constructor(t){var{viewportPadding:e=60}=t;super(i(t,["viewportPadding"])),this.viewportPadding=60,this.viewportPadding=e}calculate(t){var{markers:t,map:e,mapCanvasProjection:r}=t;return e.getZoom()>=this.maxZoom?{clusters:this.noop({markers:t}),changed:!1}:{clusters:this.cluster({markers:h(e,r,t,this.viewportPadding),map:e,mapCanvasProjection:r})}}}const r=t=>t.map(t=>new a({position:n.getPosition(t),markers:[t]}));var m,d,g=(d=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var s,o,i;if(Array.isArray(e)){if((s=e.length)!=r.length)return!1;for(o=s;0!=o--;)if(!t(e[o],r[o]))return!1}else{if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((s=(i=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=s;0!=o--;){var a=i[o];if(!t(e[a],r[a]))return!1}}return!0}return e!=e&&r!=r})&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;const f=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class v{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[e,r]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");e=r>>4;if(1!=e)throw new Error(`Got v${e} data when expected v1.`);var s,e=f[15&r];if(e)return[r]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1),new v(s,r,e,t);throw new Error("Unrecognized array type.")}constructor(t,e=64,r=Float64Array,s){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var o=f.indexOf(this.ArrayType),i=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,n=(8-a%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${r}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+n,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+i+a+n),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+n,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=t,this.coords[this._pos++]=e,r}finish(){var t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return function t(e,r,s,o,i,a){if(i-o<=s)return;const n=o+i>>1;k(e,r,n,o,i,a),t(e,r,s,o,n-1,1-a),t(e,r,s,1+n,i,1-a)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,s,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:t}=this,n=[0,i.length-1,0],h=[];for(;n.length;){var l=n.pop()||0,u=n.pop()||0,c=n.pop()||0;if(u-c<=t)for(let t=c;t<=u;t++){const n=a[2*t],g=a[2*t+1];n>=e&&n<=s&&r<=g&&g<=o&&h.push(i[t])}else{var p=c+u>>1,m=a[2*p],d=a[2*p+1];e<=m&&m<=s&&r<=d&&d<=o&&h.push(i[p]),(0===l?e<=m:r<=d)&&(n.push(c),n.push(p-1),n.push(1-l)),(0===l?m<=s:d<=o)&&(n.push(1+p),n.push(u),n.push(1-l))}}return h}within(e,r,t){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:o,nodeSize:i}=this,a=[0,s.length-1,0],n=[],h=t*t;a.length;){var l=a.pop()||0,u=a.pop()||0,c=a.pop()||0;if(u-c<=i)for(let t=c;t<=u;t++)M(o[2*t],o[2*t+1],e,r)<=h&&n.push(s[t]);else{var p=c+u>>1,m=o[2*p],d=o[2*p+1];M(m,d,e,r)<=h&&n.push(s[p]),(0===l?e-t<=m:r-t<=d)&&(a.push(c),a.push(p-1),a.push(1-l)),(0===l?m<=e+t:d<=r+t)&&(a.push(1+p),a.push(u),a.push(1-l))}}return n}}function k(r,s,o,i,a,n){for(;i<a;){600<a-i&&(h=a-i+1,l=o-i+1,c=Math.log(h),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(h-u)/h)*(l-h/2<0?-1:1),k(r,s,o,Math.max(i,Math.floor(o-l*u/h+c)),Math.min(a,Math.floor(o+(h-l)*u/h+c)),n));var h,l,u,c,p=s[2*o+n];let t=i,e=a;for(w(r,s,i,o),s[2*a+n]>p&&w(r,s,i,a);t<e;){for(w(r,s,t,e),t++,e--;s[2*t+n]<p;)t++;for(;s[2*e+n]>p;)e--}s[2*i+n]===p?w(r,s,i,e):w(r,s,++e,a),e<=o&&(i=e+1),o<=e&&(a=e-1)}}function w(t,e,r,s){y(t,r,s),y(e,2*r,2*s),y(e,2*r+1,2*s+1)}function y(t,e,r){var s=t[e];t[e]=t[r],t[r]=s}function M(t,e,r,s){t-=r,r=e-s;return t*t+r*r}const U={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},x=Math.fround||(m=new Float32Array(1),t=>(m[0]=+t,m[0])),C=3,P=5,_=6;class E{constructor(t){this.options=Object.assign(Object.create(U),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:r,minZoom:s,maxZoom:o}=this.options,i=(r&&console.time("total time"),`prepare ${e.length} points`);r&&console.time(i),this.points=e;var a=[];for(let t=0;t<e.length;t++){const s=e[t];if(s.geometry){const[o,i]=s.geometry.coordinates,n=x(L(o)),h=x(O(i));a.push(n,h,1/0,t,-1,1),this.options.reduce&&a.push(0)}}let n=this.trees[o+1]=this._createTree(a);r&&console.timeEnd(i);for(let t=o;t>=s;t--){const s=+Date.now();n=this.trees[t]=this._createTree(this._cluster(n,t)),r&&console.log("z%d: %d clusters in %dms",t,n.numItems,+Date.now()-s)}return r&&console.timeEnd("total time"),this}getClusters(t,e){let r=((t[0]+180)%360+360)%360-180;var s=Math.max(-90,Math.min(90,t[1]));let o=180===t[2]?180:((t[2]+180)%360+360)%360-180;var i=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])r=-180,o=180;else if(r>o){const t=this.getClusters([r,s,180,i],e),a=this.getClusters([-180,s,o,i],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],n=a.range(L(r),O(i),L(o),O(s)),h=a.data,l=[];for(const t of n){const e=this.stride*t;l.push(1<h[e+P]?A(h,e,this.clusterProps):this.points[h[e+C]])}return l}getChildren(t){const e=this._getOriginId(t),r=this._getOriginZoom(t),s="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(s);var i=o.data;if(e*this.stride>=i.length)throw new Error(s);var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),n=i[e*this.stride],h=i[e*this.stride+1],l=[];for(const e of o.within(n,h,a)){const r=e*this.stride;i[4+r]===t&&l.push(1<i[r+P]?A(i,r,this.clusterProps):this.points[i[r+C]])}if(0===l.length)throw new Error(s);return l}getLeaves(t,e,r){var s=[];return this._appendLeaves(s,t,e=e||10,r=r||0,0),s}getTile(t,e,r){var s=this.trees[this._limitZoom(t)],t=Math.pow(2,t),{extent:o,radius:i}=this.options,i=i/o,o=(r-i)/t,a=(r+1+i)/t,n={features:[]};return this._addTileFeatures(s.range((e-i)/t,o,(e+1+i)/t,a),s.data,e,r,t,n),0===e&&this._addTileFeatures(s.range(1-i/t,o,1,a),s.data,t,r,t,n),e===t-1&&this._addTileFeatures(s.range(0,o,i/t,a),s.data,-1,r,t,n),n.features.length?n:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e}_appendLeaves(t,e,r,s,o){const i=this.getChildren(e);for(const e of i){const i=e.properties;if(i&&i.cluster?o+i.point_count<=s?o+=i.point_count:o=this._appendLeaves(t,i.cluster_id,r,s,o):o<s?o++:t.push(e),t.length===r)break}return o}_createTree(e){var r=new v(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)r.add(e[t],e[t+1]);return r.finish(),r.data=e,r}_addTileFeatures(s,o,i,a,n,h){for(const c of s){const s=c*this.stride,p=1<o[s+P];let t,e,r;if(p)t=b(o,s,this.clusterProps),e=o[s],r=o[1+s];else{const i=this.points[o[s+C]],[a,n]=(t=i.properties,i.geometry.coordinates);e=L(a),r=O(n)}var l={type:1,geometry:[[Math.round(this.options.extent*(e*n-i)),Math.round(this.options.extent*(r*n-a))]],tags:t},u=p||this.options.generateId?o[s+C]:this.points[o[s+C]].id;void 0!==u&&(l.id=u),h.features.push(l)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,a){const{radius:e,extent:n,reduce:h,minPoints:r}=this.options,s=e/(n*Math.pow(2,a)),l=t.data,u=[],c=this.stride;for(let i=0;i<l.length;i+=c)if(!(l[i+2]<=a)){l[i+2]=a;const n=l[i],d=l[i+1],g=t.within(l[i],l[i+1],s),f=l[i+P];let o=f;for(const t of g){const e=t*c;l[2+e]>a&&(o+=l[e+P])}if(o>f&&o>=r){let t,e=n*f,r=d*f,s=-1;var p,m=((i/c|0)<<5)+(a+1)+this.points.length;for(const n of g){const u=n*c;l[2+u]<=a||(l[2+u]=a,p=l[u+P],e+=l[u]*p,r+=l[1+u]*p,l[4+u]=m,h&&(t||(t=this._map(l,i,!0),s=this.clusterProps.length,this.clusterProps.push(t)),h(t,this._map(l,u))))}l[i+4]=m,u.push(e/o,r/o,1/0,m,-1,o),h&&u.push(s)}else{for(let t=0;t<c;t++)u.push(l[i+t]);if(1<o)for(const t of g){const e=t*c;if(!(l[2+e]<=a)){l[2+e]=a;for(let t=0;t<c;t++)u.push(l[e+t])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,r){if(1<t[e+P]){const s=this.clusterProps[t[e+_]];return r?Object.assign({},s):s}const s=this.points[t[e+C]].properties,o=this.options.map(s);return r&&o===s?Object.assign({},o):o}}function A(t,e,r){return{type:"Feature",id:t[e+C],properties:b(t,e,r),geometry:{type:"Point",coordinates:[360*(t[e]-.5),function(t){t=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}(t[e+1])]}}}function b(t,e,r){var s=t[e+P],o=1e4<=s?Math.round(s/1e3)+"k":1e3<=s?Math.round(s/100)/10+"k":s,i=t[e+_],r=-1===i?{}:Object.assign({},r[i]);return Object.assign(r,{cluster:!0,cluster_id:t[e+C],point_count:s,point_count_abbreviated:o})}function L(t){return t/360+.5}function O(t){t=Math.sin(t*Math.PI/180),t=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return t<0?0:1<t?1:t}class Z extends t{constructor(t){var{maxZoom:e,radius:r=60}=t,t=i(t,["maxZoom","radius"]);super({maxZoom:e}),this.state={zoom:-1},this.superCluster=new E(Object.assign({maxZoom:this.maxZoom,radius:r},t))}calculate(t){let e=!1;const r={zoom:t.map.getZoom()};if(!g(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const r=this.markers.map(t=>{var e=n.getPosition(t);return{type:"Feature",geometry:{type:"Point",coordinates:[e.lng(),e.lat()]},properties:{marker:t}}});this.superCluster.load(r)}return e||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(e=!g(this.state,r)),this.state=r,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster(t){t=t.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(t=>this.transformCluster(t))}transformCluster(t){var{geometry:{coordinates:[t,e]},properties:r}=t;return r.cluster?new a({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(t=>t.properties.marker),position:{lat:e,lng:t}}):(e=r.marker,new a({markers:[e],position:n.getPosition(e)}))}}class I{constructor(t,e){this.markers={sum:t.length};var t=e.map(t=>t.count),r=t.reduce((t,e)=>t+e,0);this.clusters={count:e.length,markers:{mean:r/e.length,sum:r,min:Math.min(...t),max:Math.max(...t)}}}}class T{render(t,e,r){var{count:t,position:s}=t,o=`<svg fill="${t>Math.max(10,e.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>
</svg>`,i=`Cluster of ${t} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+t;if(n.isAdvancedMarkerAvailable(r)){const t=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement,e=(t.setAttribute("transform","translate(0 25)"),{map:r,position:s,zIndex:a,title:i,content:t});return new google.maps.marker.AdvancedMarkerElement(e)}e={position:s,zIndex:a,title:i,icon:{url:"data:image/svg+xml;base64,"+btoa(o),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(e)}}class j{constructor(){var t,e=j,r=google.maps.OverlayView;for(t in r.prototype)e.prototype[t]=r.prototype[t]}}o.MarkerClustererEvents=void 0,(d=o.MarkerClustererEvents||(o.MarkerClustererEvents={})).CLUSTERING_BEGIN="clusteringbegin",d.CLUSTERING_END="clusteringend",d.CLUSTER_CLICK="click";const S=(t,e,r)=>{r.fitBounds(e.bounds)};return o.AbstractAlgorithm=t,o.AbstractViewportAlgorithm=e,o.Cluster=a,o.ClusterStats=I,o.DefaultRenderer=T,o.GridAlgorithm=class extends e{constructor(t){var{maxDistance:e=4e4,gridSize:r=40}=t;super(i(t,["maxDistance","gridSize"])),this.clusters=[],this.state={zoom:-1},this.maxDistance=e,this.gridSize=r}calculate(t){var{markers:t,map:e,mapCanvasProjection:r}=t,s={zoom:e.getZoom()};let o=!1;return this.state.zoom>=this.maxZoom&&s.zoom>=this.maxZoom||(o=!g(this.state,s)),this.state=s,e.getZoom()>=this.maxZoom?{clusters:this.noop({markers:t}),changed:o}:{clusters:this.cluster({markers:h(e,r,t,this.viewportPadding),map:e,mapCanvasProjection:r})}}cluster(t){let{markers:e,map:r,mapCanvasProjection:s}=t;return this.clusters=[],e.forEach(t=>{this.addToClosestCluster(t,r,s)}),this.clusters}addToClosestCluster(e,t,r){let s=this.maxDistance,o=null;for(let t=0;t<this.clusters.length;t++){const a=this.clusters[t],r=u(a.bounds.getCenter().toJSON(),n.getPosition(e).toJSON());r<s&&(s=r,o=a)}if(o&&l(o.bounds,r,this.gridSize).contains(n.getPosition(e)))o.push(e);else{const t=new a({markers:[e]});this.clusters.push(t)}}},o.MarkerClusterer=class extends j{constructor(t){var{map:t,markers:e=[],algorithmOptions:r={},algorithm:r=new Z(r),renderer:s=new T,onClusterClick:o=S}=t;super(),this.markers=[...e],this.clusters=[],this.algorithm=r,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e)||this.render()}addMarkers(t,e){t.forEach(t=>{this.addMarker(t,!0)}),e||this.render()}removeMarker(t,e){var r=this.markers.indexOf(t);return-1!==r&&(n.setMap(t,null),this.markers.splice(r,1),e||this.render(),!0)}removeMarkers(t,e){let r=!1;return t.forEach(t=>{r=this.removeMarker(t,!0)||r}),r&&!e&&this.render(),r}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,o.MarkerClustererEvents.CLUSTERING_BEGIN,this);var{clusters:e,changed:r}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(r||null==r){const o=new Set;for(const t of e)1==t.markers.length&&o.add(t.markers[0]);const t=[];for(const s of this.clusters)null!=s.marker&&(1==s.markers.length?o.has(s.marker)||n.setMap(s.marker,null):t.push(s.marker));this.clusters=e,this.renderClusters(),requestAnimationFrame(()=>t.forEach(t=>n.setMap(t,null)))}google.maps.event.trigger(this,o.MarkerClustererEvents.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>n.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new I(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(e=>{1===e.markers.length?e.marker=e.markers[0]:(e.marker=this.renderer.render(e,t,r),e.markers.forEach(t=>n.setMap(t,null)),this.onClusterClick&&e.marker.addListener("click",t=>{google.maps.event.trigger(this,o.MarkerClustererEvents.CLUSTER_CLICK,e),this.onClusterClick(t,e,r)})),n.setMap(e.marker,r)})}},o.MarkerUtils=n,o.NoopAlgorithm=class extends t{constructor(t){super(i(t,[]))}calculate(t){var{markers:t,map:e,mapCanvasProjection:r}=t;return{clusters:this.cluster({markers:t,map:e,mapCanvasProjection:r}),changed:!1}}cluster(t){return this.noop(t)}},o.SuperClusterAlgorithm=Z,o.SuperClusterViewportAlgorithm=class extends e{constructor(t){var{maxZoom:e,radius:r=60,viewportPadding:s=60}=t,t=i(t,["maxZoom","radius","viewportPadding"]);super({maxZoom:e,viewportPadding:s}),this.superCluster=new E(Object.assign({maxZoom:this.maxZoom,radius:r},t)),this.state={zoom:-1,view:[0,0,0,0]}}calculate(t){const e={zoom:Math.round(t.map.getZoom()),view:s(t.map.getBounds(),t.mapCanvasProjection,this.viewportPadding)};let r=!g(this.state,e);if(!g(t.markers,this.markers)){r=!0,this.markers=[...t.markers];const e=this.markers.map(t=>{var e=n.getPosition(t);return{type:"Feature",geometry:{type:"Point",coordinates:[e.lng(),e.lat()]},properties:{marker:t}}});this.superCluster.load(e)}return r&&(this.clusters=this.cluster(t),this.state=e),{clusters:this.clusters,changed:r}}cluster(t){var{map:t,mapCanvasProjection:e}=t,t={zoom:Math.round(t.getZoom()),view:s(t.getBounds(),e,this.viewportPadding)};return this.superCluster.getClusters(t.view,t.zoom).map(t=>this.transformCluster(t))}transformCluster(t){var{geometry:{coordinates:[t,e]},properties:r}=t;return r.cluster?new a({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(t=>t.properties.marker),position:{lat:e,lng:t}}):(e=r.marker,new a({markers:[e],position:n.getPosition(e)}))}},o.defaultOnClusterClickHandler=S,o.distanceBetweenPoints=u,o.extendBoundsToPaddedViewport=l,o.extendPixelBounds=c,o.filterMarkersToPaddedViewport=h,o.getPaddedViewport=s,o.noop=r,o.pixelBoundsToLatLngBounds=p,Object.defineProperty(o,"__esModule",{value:!0}),o}({});